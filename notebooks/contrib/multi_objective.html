
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Multi-Objective Optimization &#8212; Optimization for Decision Science</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/contrib/multi_objective';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Advanced Topics in Stochastic Programming" href="advanced_stochastic_programming.html" />
    <link rel="prev" title="Modeling Paradigms" href="modeling.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/cbe_logo.jpg" class="logo__image only-light" alt="Optimization for Decision Science - Home"/>
    <script>document.write(`<img src="../../_static/cbe_logo.jpg" class="logo__image only-dark" alt="Optimization for Decision Science - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../intro.html">
                    Optimization for Decision Science
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Organization</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../org/intro.html">Welcome</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../org/syllabus.html">Syllabus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../org/calendar.html">Fall 2024 Calendar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../org/contribute.html">Contribution Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../org/workshop.html">Computational Optimization in Python (São Paulo, Brazil)</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../org/assignments.html">Assignments</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../assignments/Pyomo1.html">Pyomo Homework 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assignments/Pyomo2.html">Pyomo Homework 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assignments/Pyomo3.html">Pyomo Homework 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../org/project1.html">Project 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assignments/Algorithms1.html">Algorithms Homework 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assignments/Algorithms2.html">Algorithms Homework 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../org/project2.html">Project 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assignments/Algorithms3.html">Algorithms Homework 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../assignments/Algorithms4.html">Algorithms Homework 4</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../org/archive.html">Archive</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../assignments/Pyomo-Mini-Project.html">Pyomo Mini-Project: Receding Horizon Stochastic Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../org/semester_project.html">Semester Project (Spring 2023)</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Optimization Modeling in Pyomo</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../1/getting-started.html">1. Getting Started with Pyomo</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../1/Local-Install.html">1.1. Local Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1/Optimization-Modeling.html">1.2. Optimization Modeling with Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1/Pyomo-Introduction.html">1.3. Your First Optimization Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1/LP.html">1.4. Continuous Optimization: Linear Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1/NLP.html">1.5. Continuous Optimization: Nonlinear Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1/IP.html">1.6. Integer Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../1/Pyomo-Nuts-and-Bolts.html">1.7. 60 Minutes to Pyomo: An Energy Storage Model Predictive Control Example</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../2/logic.html">2. Logical Modeling</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../2/Logical_Modeling_GDP.html">2.1. Logical Modeling and Generalized Disjunctive Programs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../2/Modeling_Disjunctions_Strip_Packing.html">2.2. Modeling Disjunctions through the Strip Packing Problem</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../3/dynamics.html">3. Dynamic Optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../3/PyomoDAE_car.html">3.1. Pyomo.DAE Example: Race Car</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3/PyomoDAE_TCLab.html">3.2. Pyomo.DAE Example: Temperature Control Lab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3/DAE_background.html">3.3. Differential Algebraic Equations (DAEs)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3/DAE_numeric_integration.html">3.4. Numeric Integration for DAEs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3/PyomoDAE_theory.html">3.5. Dynamic Optimization with Collocation and Pyomo.DAE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../3/PyomoDAE_example.html">3.6. Pyomo.DAE: Racing Example Revisited</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../4/uncertainty.html">4. Optimization Under Uncertainty</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../4/SP.html">4.1. Stochastic Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4/blocks.html">4.2. Blocks and Other Pyomo Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4/AdvancedTopics.html">4.3. Advanced Topics in Stochastic Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="../4/RiskMeasures.html">4.4. Risk Measures and Portfolio Optimization</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../5/data.html">5. Data Science and Applied Statistics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../5/Parmest-tutorial.html">5.1. Parameter estimation with <code class="docutils literal notranslate"><span class="pre">parmest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../5/Parmest-generate-data.html">5.2. Supplementary material: data for parmest tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../5/Pyomo_DoE_Tutorial.html">5.3. Optimizing Experiments with <code class="docutils literal notranslate"><span class="pre">Pyomo.DoE</span></code></a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Algorithms and Theory</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../6/unconstrained.html">6. Unconstrained Nonlinear Optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../6/Math-Primer-1.html">6.1. Linear Algebra Review and SciPy Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6/Math-Primer-2.html">6.2. Mathematics Primer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6/Optimality.html">6.3. Unconstrained Optimality Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6/Newton-Methods.html">6.4. Newton-type Methods for Unconstrained Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6/Quasi-Newton-Methods.html">6.5. Quasi-Newton Methods for Unconstrained Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../6/Globalization.html">6.6. Descent and Globalization</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../7/constrained.html">7. Constrained Nonlinear Optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../7/Convexity.html">7.1. Convexity Revisited</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7/Local-Optimality.html">7.2. Local Optimality Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7/KKT-Multipliers.html">7.3. Analysis of KKT Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7/Constraint-Qualifications.html">7.4. Constraint Qualifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7/Second-Order.html">7.5. Second Order Optimality Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7/degeneracy_hunter.html">7.6. NLP Diagnostics with Degeneracy Hunter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7/Interior-Point1.html">7.7. Simple Netwon Method for Equality Constrained NLPs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../7/Interior-Point2.html">7.8. Inertia-Corrected Netwon Method for Equality Constrained NLPs</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../8/special-topics.html">8. Special Topics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../8/MILP.html">8.1. Integer Programming with Simple Branch and Bound</a></li>
<li class="toctree-l2"><a class="reference internal" href="../8/MINLP-Algorithms.html">8.2. MINLP Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../8/Global-Opt.html">8.3. Deterministic Global Optimization</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Student Contributions</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="pyomo.html">More Pyomo Examples</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="semiconductor_manufacturing.html">Semiconductor Production Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="student_diet.html">Optimization of Daily Diet Using Pyomo</a></li>
<li class="toctree-l2"><a class="reference internal" href="blending.html">Blending Under Uncertainty</a></li>
<li class="toctree-l2"><a class="reference internal" href="vehicle_routing.html">Vehicle Routing</a></li>

<li class="toctree-l2"><a class="reference internal" href="portfolio_optimization_extended.html">Risk Measures and Portfolio Optimization: Expanded</a></li>
<li class="toctree-l2"><a class="reference internal" href="race_car_extended.html">Extended Race Car Optimization Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="hot_air_balloon.html">Hot Air Balloon Dynamic Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="reactor_design.html">Chemical Reactor Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="Disaster_Response_Plan.html">Disaster Response Plan Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="Sudoku_Solver.html">Sudoku Solver</a></li>
<li class="toctree-l2"><a class="reference internal" href="more_circle_packing.html">Circle Packing Optimization</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="modeling.html">Modeling Paradigms</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Multi-Objective Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_stochastic_programming.html">Advanced Topics in Stochastic Programming</a></li>






</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="algorithms.html">Global Optimization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Deterministic_Global_Optimization.html">Deterministic Global Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="Bayesian_Optimization1.html">Bayesian Optimization Tutorial 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Bayesian_Optimization2.html">Bayesian Optimization Tutorial 2</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="sgd.html">Stochastic Gradient Descent</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="Stochastic-Gradient-Descent-1.html">Stochastic Gradient Descent Tutorial 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="Stochastic-Gradient-Descent-2.html">Stochastic Gradient Descent Tutorial 2</a></li>






<li class="toctree-l2"><a class="reference internal" href="Stochastic-Gradient-Descent-3.html">Stochastic Gradient Descent Tutorial 3</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="data.html">Machine Learning and Applied Statistics</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="EM-MAP.html">Expectation Maximization Algorithm and MAP Estimation</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/ndcbe/optimization/blob/master/notebooks/contrib/multi_objective.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/ndcbe/optimization" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/ndcbe/optimization/issues/new?title=Issue%20on%20page%20%2Fnotebooks/contrib/multi_objective.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/notebooks/contrib/multi_objective.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Multi-Objective Optimization</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-definitions">Basic Definitions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scaling">Scaling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pareto-optimality">Pareto Optimality</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#epsilon-constraint-method">Epsilon-Constraint Method</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#key-concepts">Key Concepts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#key-points">Key Points</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-design-of-chemical-reactors-for-chemical-transformations">Example: Design of Chemical Reactors for Chemical Transformations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-objective-optimization-to-maximize-species-b-and-c">Multi-Objective Optimization to Maximize Species B and C</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#optimization-model-formulation">Optimization Model Formulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#degrees-of-freedom-analysis">Degrees of Freedom Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#weighted-method-pyomo-implementation">Weighted Method Pyomo Implementation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#epsilon-constraint-method-pyomo-implementation">Epsilon-Constraint Method Pyomo Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moo-identifies-the-lowest-reactor-volume-and-offers-control-over-production">MOO Identifies the Lowest Reactor Volume and Offers Control over Production</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#take-away-messages">Take Away Messages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="multi-objective-optimization">
<h1>Multi-Objective Optimization<a class="headerlink" href="#multi-objective-optimization" title="Link to this heading">#</a></h1>
<p><strong>Prepared by:</strong> <a class="reference external" href="https://www.linkedin.com/in/shammah-lilonfe-34956214a?utm_source=share&amp;amp;utm_campaign=share_via&amp;amp;utm_content=profile&amp;amp;utm_medium=android_app">Shammah Lilonfe</a> (<a class="reference external" href="mailto:slilonfe&#37;&#52;&#48;nd&#46;edu">slilonfe<span>&#64;</span>nd<span>&#46;</span>edu</a>, 2024) and Zhicheng Lu (<a class="reference external" href="mailto:zlu3&#37;&#52;&#48;nd&#46;edu">zlu3<span>&#64;</span>nd<span>&#46;</span>edu</a>, 2024) at the University of Notre Dame.</p>
<p>Notes for edits:</p>
<ul class="simple">
<li><p>Add standard imports so this runs on Colab and locally</p></li>
<li><p>Remove material in prior notebook</p></li>
<li><p>Verify notebook runs</p></li>
<li><p>Adjust equation numbering</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>

<span class="k">if</span> <span class="s2">&quot;google.colab&quot;</span> <span class="ow">in</span> <span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="p">:</span>
    <span class="o">!</span>wget<span class="w"> </span><span class="s2">&quot;https://raw.githubusercontent.com/ndcbe/optimization/main/notebooks/helper.py&quot;</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">helper</span>
    <span class="n">helper</span><span class="o">.</span><span class="n">install_idaes</span><span class="p">()</span>
    <span class="n">helper</span><span class="o">.</span><span class="n">install_ipopt</span><span class="p">()</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;../&#39;</span><span class="p">)</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">helper</span>

    <span class="c1"># Loads IPOPT and other solvers</span>
    <span class="kn">import</span><span class="w"> </span><span class="nn">idaes</span>

<span class="n">helper</span><span class="o">.</span><span class="n">set_plotting_style</span><span class="p">()</span>

<span class="c1"># Importing packages to be used in this project</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyomo.environ</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pyo</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pyomo.dae</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">dae</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
</pre></div>
</div>
</div>
</div>
<section id="learning-objectives">
<h2>Learning Objectives<a class="headerlink" href="#learning-objectives" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Explain the modelling strategies of multi-objective optimization (MOO)</p></li>
<li><p>Demonstrate the power of MOO in solving chemical industry problems</p></li>
</ul>
</section>
<section id="basic-definitions">
<h2>Basic Definitions<a class="headerlink" href="#basic-definitions" title="Link to this heading">#</a></h2>
<p>Let <span class="math notranslate nohighlight">\(\mathbf{x} \in \mathbb{R}^{n_x}\)</span> be the decision vector that lies in the feasible set <span class="math notranslate nohighlight">\(X \subseteq \mathbb{R}^{n_x}\)</span>, which is assumed to be compact and nonempty. Given  <span class="math notranslate nohighlight">\(n\)</span> objective functions <span class="math notranslate nohighlight">\(f_i: X \to \mathbb{R}\)</span> for <span class="math notranslate nohighlight">\(i \in O:\)</span> = {1, 2, <span class="math notranslate nohighlight">\(\dots, n\)</span>}, and the corresponding objective vector: <span class="math notranslate nohighlight">\(\mathbf{f}(\mathbf{x}) = \big(f_1(\mathbf{x}), f_2(\mathbf{x}), \dots, f_{n}(\mathbf{x})\big)\)</span>. Assuming that the objective functions remain bounded in <span class="math notranslate nohighlight">\(X\)</span>.</p>
<p>The MOO problem is defined as:
$<span class="math notranslate nohighlight">\(\begin{equation}
\min_{x \in X} \big(f_1(x), f_2(x), \dots, f_{n}(x)\big) \tag{1.1}
\end{equation}\)</span>$</p>
<p>Again, we assume that the minimization operand implies global minimization and that the objective functions have been scaled so that their values lie in the interval [0, 1].</p>
<p>This was taken from Dowling et al. (2016).</p>
<section id="scaling">
<h3>Scaling<a class="headerlink" href="#scaling" title="Link to this heading">#</a></h3>
<p>Scaling of the objective functions is performed using the coordinates of the utopia and nadirpoints as follows. We define:</p>
<div class="amsmath math notranslate nohighlight" id="equation-acb28e0c-fe0a-40ca-b9d3-b0492de9ccfe">
<span class="eqno">(2)<a class="headerlink" href="#equation-acb28e0c-fe0a-40ca-b9d3-b0492de9ccfe" title="Permalink to this equation">#</a></span>\[\begin{equation}
\underline{f}_i = \min_{x \in X} f_i(x), \quad i \in O \tag{1.2a}
\end{equation}\]</div>
<div class="amsmath math notranslate nohighlight" id="equation-e7a5edb7-85bb-4e06-a2f2-4d67784b6072">
<span class="eqno">(3)<a class="headerlink" href="#equation-e7a5edb7-85bb-4e06-a2f2-4d67784b6072" title="Permalink to this equation">#</a></span>\[\begin{equation}
\underline{x}_i = \arg\min_{x \in X} f_i(x), \quad i \in O. \tag{1.2b}
\end{equation}\]</div>
<p>Here, the coordinates of the utopia point are given by <span class="math notranslate nohighlight">\(\underline{f}_i\)</span>, while those of the nadir point are given by:</p>
<div class="amsmath math notranslate nohighlight" id="equation-ca23d909-cdde-4034-8ce9-b78f03d99843">
<span class="eqno">(4)<a class="headerlink" href="#equation-ca23d909-cdde-4034-8ce9-b78f03d99843" title="Permalink to this equation">#</a></span>\[\begin{equation}
\bar{f}_i = \max \{ f_i(\underline{x}_1), f_i(\underline{x}_2), \dots, f_i(\underline{x}_{n}) \}, \quad i \in O. \tag{1.3}
\end{equation}\]</div>
<p>The objectives are scaled as follows:</p>
<div class="amsmath math notranslate nohighlight" id="equation-1e95bde0-7cca-4848-b266-fb99f60049b5">
<span class="eqno">(5)<a class="headerlink" href="#equation-1e95bde0-7cca-4848-b266-fb99f60049b5" title="Permalink to this equation">#</a></span>\[\begin{equation}
f_i(x) \leftarrow \frac{f_i(x) - \underline{f}_i}{\bar{f}_i - \underline{f}_i}, \quad i \in O. \tag{1.4}
\end{equation}\]</div>
<p>We can prevent visiting regions beyond the nadir points by imposing the constraints:</p>
<div class="amsmath math notranslate nohighlight" id="equation-8f9e7ede-6f34-46ee-b60c-d1cdb5d2e0f4">
<span class="eqno">(6)<a class="headerlink" href="#equation-8f9e7ede-6f34-46ee-b60c-d1cdb5d2e0f4" title="Permalink to this equation">#</a></span>\[\begin{equation}
0 \leq f_i(x) \leq 1, \quad i \in O. \tag{1.5}
\end{equation}\]</div>
<p>This was taken from Dowling et al. (2016).</p>
</section>
<section id="pareto-optimality">
<h3>Pareto Optimality<a class="headerlink" href="#pareto-optimality" title="Link to this heading">#</a></h3>
<p>Below are the standard definitions of weak Pareto optimality and Pareto optimality (Miettinen, 1999):</p>
<p><strong>Definition 1 (Weak Pareto Optimality)</strong>: A decision <span class="math notranslate nohighlight">\(x^*\)</span> with objectives <span class="math notranslate nohighlight">\(f_i(x^*), \, i \in O\)</span> is a weak Pareto solution of MOO if there does not exist an alternate solution <span class="math notranslate nohighlight">\(x\)</span> with objectives <span class="math notranslate nohighlight">\(f_i(x), \, i \in O\)</span> which satisfies <span class="math notranslate nohighlight">\(f_i(x) &lt; f_i(x^*)\)</span> for all  <span class="math notranslate nohighlight">\(i \in O\)</span>.</p>
<p><strong>Definition 2 (Pareto Optimality)</strong>: A decision <span class="math notranslate nohighlight">\(x^*\)</span> with objectives <span class="math notranslate nohighlight">\(f_i(x^*), \, i \in O\)</span> is a Pareto solution of MOO if there does not exist an alternate solution <span class="math notranslate nohighlight">\(x\)</span> with objectives <span class="math notranslate nohighlight">\(f_i(x), \, i \in O\)</span> which satisfies <span class="math notranslate nohighlight">\(f_i(x) \leq f_i(x^*)\)</span> for all <span class="math notranslate nohighlight">\(i \in O\)</span> and at least one index <span class="math notranslate nohighlight">\(i\)</span> satisfies <span class="math notranslate nohighlight">\(f_i(x) &lt; f_i(x^*)\)</span>.</p>
<p>Any Pareto solution of MOO is a weak Pareto solution. To see this, we consider the following contradiction: assume <span class="math notranslate nohighlight">\(x^*\)</span> is a Pareto solution, and thus no alternate decision <span class="math notranslate nohighlight">\(x\)</span> exists such that <span class="math notranslate nohighlight">\(f_i(x) \leq f_i(x^*)\)</span> for all <span class="math notranslate nohighlight">\(i \in O\)</span> and <span class="math notranslate nohighlight">\(f_i(x) &lt; f_i(x^*)\)</span> for at least one index <span class="math notranslate nohighlight">\(i\)</span>. If, in addition, we assume that <span class="math notranslate nohighlight">\(x^*\)</span> is not weak Pareto, then there exists an alternate decision <span class="math notranslate nohighlight">\(x\)</span> such that <span class="math notranslate nohighlight">\(f_i(x) &lt; f_i(x^*)\)</span> for all <span class="math notranslate nohighlight">\(i \in O\)</span>. This is a contradiction, and thus <span class="math notranslate nohighlight">\(x^*\)</span> must be a Pareto and a weak Pareto solution.</p>
<p>The set of all Pareto solutions for MOO is known as the Pareto set. There are different methods that can be used to compute elements of the Pareto set, such as the weighting method. The results associated with this method will become relevant in the following sections.</p>
<p>Consider a weight vector <span class="math notranslate nohighlight">\(\mathbf{w} \in \mathbb{R}^n\)</span> and assume that this satisfy the conditions:</p>
<div class="amsmath math notranslate nohighlight" id="equation-629c6740-1514-4f34-b20b-219998887050">
<span class="eqno">(7)<a class="headerlink" href="#equation-629c6740-1514-4f34-b20b-219998887050" title="Permalink to this equation">#</a></span>\[\begin{equation}
w_i \geq 0, \quad i \in O, \tag{1.6a}
\end{equation}\]</div>
<div class="amsmath math notranslate nohighlight" id="equation-41854d90-d677-45e0-892b-f352f7e8e2ec">
<span class="eqno">(8)<a class="headerlink" href="#equation-41854d90-d677-45e0-892b-f352f7e8e2ec" title="Permalink to this equation">#</a></span>\[\begin{equation}
\sum_{i \in O} w_i = 1. \tag{1.6b}
\end{equation}\]</div>
<p>In some cases, we will require the weights to satisfy the stronger condition:</p>
<div class="amsmath math notranslate nohighlight" id="equation-d989d305-bb83-4567-bac5-ed7eb1fd977b">
<span class="eqno">(9)<a class="headerlink" href="#equation-d989d305-bb83-4567-bac5-ed7eb1fd977b" title="Permalink to this equation">#</a></span>\[\begin{equation}
w_i &gt; 0, \quad i \in O \tag{1.7a}
\end{equation}\]</div>
<div class="amsmath math notranslate nohighlight" id="equation-ffdd65e8-f666-4ed7-b7d4-7bb075b642ad">
<span class="eqno">(10)<a class="headerlink" href="#equation-ffdd65e8-f666-4ed7-b7d4-7bb075b642ad" title="Permalink to this equation">#</a></span>\[\begin{equation}
\sum_{i \in O} w_i = 1. \tag{1.7b}
\end{equation}\]</div>
<p>Consider now the weighted problem:</p>
<div class="amsmath math notranslate nohighlight" id="equation-fcb27b77-d6ce-40c4-a912-766463b5a6c7">
<span class="eqno">(11)<a class="headerlink" href="#equation-fcb27b77-d6ce-40c4-a912-766463b5a6c7" title="Permalink to this equation">#</a></span>\[\begin{equation}
\min_{x \in X} \mathbf{w}^T \mathbf{f}(\mathbf{x}). \tag{1.8}
\end{equation}\]</div>
<p>The solutions of this problem satisfy the following property:</p>
<p><strong>Proposition 1</strong>: Let <span class="math notranslate nohighlight">\(x^*\)</span> be a solution of the weighted problem (1.8):</p>
<ul class="simple">
<li><p>If the weight vector <span class="math notranslate nohighlight">\(\mathbf{w}\)</span> satisfies <span class="math notranslate nohighlight">\(w_i \geq 0, \, i \in O\)</span> (Condition 1.6a), then <span class="math notranslate nohighlight">\(x^*\)</span> is a weak Pareto solution of MOO.</p></li>
<li><p>If the weight vector <span class="math notranslate nohighlight">\(\mathbf{w}\)</span> satisfies <span class="math notranslate nohighlight">\(w_i &gt; 0, \, i \in O\)</span> (Condition 1.7a), then <span class="math notranslate nohighlight">\(x^*\)</span> is a Pareto solution of MOO.</p></li>
</ul>
<p>The nadir point is obtained by computing worst-case value results of the utopia point as in (1.2) and (1.3). The nadir point coordinates are determined by minimizing each objective function and then obtaining the corresponding worst-case values for the objectives. This approach is equivalent to solving (1.1) with <span class="math notranslate nohighlight">\(w_i=1\)</span> and <span class="math notranslate nohighlight">\(w_{i' \neq i}=0\)</span> for <span class="math notranslate nohighlight">\(i, i' ∈ O\)</span>. From Proposition 1, these single objective solutionsare only weak Pareto solutions. Consequently, it is possible to achieve a further reduction in the other objectives without compromising the original single objective. Because of this, the nadir point may unnecessarily enlarges the decision space. This inturn impacts the scaling of the objectives in (1.4). To address this issue, an alternate nadir point is exploited.</p>
<p><strong>Definition 3 (Alternate Nadir Point)</strong>: Let <span class="math notranslate nohighlight">\(\underline{x}_i\)</span> and <span class="math notranslate nohighlight">\(\underline{f}_i\)</span> be defined as in (1.2) for all <span class="math notranslate nohighlight">\(i \in O\)</span>. For each <span class="math notranslate nohighlight">\(i \in O\)</span>, let the alternate nadir solution <span class="math notranslate nohighlight">\(\underline{x}^*_i\)</span> be defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-6b8865d7-4b73-4d5f-8ece-eda5905b3b1c">
<span class="eqno">(12)<a class="headerlink" href="#equation-6b8865d7-4b73-4d5f-8ece-eda5905b3b1c" title="Permalink to this equation">#</a></span>\[\begin{equation}
\underline{x}^*_i = \arg\min_{x \in X} \mathbf{w}^T \mathbf{f}(\mathbf{x}) 
\end{equation}\]</div>
<div class="amsmath math notranslate nohighlight" id="equation-fc861fc3-871d-4e26-ba08-8c42302cbe5e">
<span class="eqno">(13)<a class="headerlink" href="#equation-fc861fc3-871d-4e26-ba08-8c42302cbe5e" title="Permalink to this equation">#</a></span>\[\begin{equation}
\text{s.t.} \quad f_i(x) \leq \underline{f}_i, \tag{1.9}
\end{equation}\]</div>
<p>where <span class="math notranslate nohighlight">\(\mathbf{w}\)</span> satisfies <span class="math notranslate nohighlight">\(w_i = 0\)</span> and <span class="math notranslate nohighlight">\(w_{i' \neq i} &gt; 0\)</span>.</p>
<p>The alternate nadir point <span class="math notranslate nohighlight">\(\mathbf{\bar{f}}^*\)</span> with elements <span class="math notranslate nohighlight">\(\bar{f}^*_i\)</span> is defined as:</p>
<div class="amsmath math notranslate nohighlight" id="equation-73034d3d-abd5-4775-a433-45e42aef27ec">
<span class="eqno">(14)<a class="headerlink" href="#equation-73034d3d-abd5-4775-a433-45e42aef27ec" title="Permalink to this equation">#</a></span>\[\begin{equation}
\bar{f}^*_i = \max\{f_i(\underline{x}^*_1), f_i(\underline{x}^*_2), \ldots, f_i(\underline{x}^*_{n})\}, \quad i \in O. \tag{1.10}
\end{equation}\]</div>
<p><strong>Proposition 2</strong>: The alternate nadir solutions <span class="math notranslate nohighlight">\(\underline{x}^*_i\)</span> for <span class="math notranslate nohighlight">\(i \in O\)</span>, are Pareto solutions of MOO.</p>
<p>The alternate nadir point method requires a selection of weights for the objective functions. Such a selection is not unique and thus different alter-nate nadir solutions can be obtained. However, all of these alternatives are guaranteed to be Pareto solutions. Even small nonzero weights guarantee this property and thus the alternate nadir point can be designed to prevent extreme degeneracies of the objectives resulting from the standard use of (1.2) and (1.3).</p>
<p>Computing all the elements in the the Pareto set is computationally intractable, particularly when many objectives are considered. It is well known, however, that one can compute Pareto optimal compromise solutions by finding points that are closest in distance to the utopia point. This is often done by solving the minimization problem:</p>
<div class="amsmath math notranslate nohighlight" id="equation-b5f9f18b-51d2-41e7-99bc-d9a3669a033d">
<span class="eqno">(15)<a class="headerlink" href="#equation-b5f9f18b-51d2-41e7-99bc-d9a3669a033d" title="Permalink to this equation">#</a></span>\[\begin{equation}
\min_{x \in X} \|f(\mathbf{x})\|_p, \tag{1.11}
\end{equation}\]</div>
<p>where <span class="math notranslate nohighlight">\(\|\cdot\|_p\)</span> is the <span class="math notranslate nohighlight">\(L_p\)</span> norm.</p>
<div class="amsmath math notranslate nohighlight" id="equation-80f8af1e-ff11-4e88-99bc-baa886c57991">
<span class="eqno">(16)<a class="headerlink" href="#equation-80f8af1e-ff11-4e88-99bc-baa886c57991" title="Permalink to this equation">#</a></span>\[\begin{equation}
\|f(\mathbf{x})\|_p = 
\left( 
\sum_{i \in O} f_i(x)^p 
\right)^{1/p}, \quad p \geq 1, \tag{1.12}
\end{equation}\]</div>
<p><strong>Proposition 3</strong>. A solution <span class="math notranslate nohighlight">\(x^*\)</span> of the minimum distance problem (1.11) is a Pareto solution of MOO.</p>
<p>This was taken from Dowling et al. (2016).</p>
</section>
</section>
<section id="epsilon-constraint-method">
<h2>Epsilon-Constraint Method<a class="headerlink" href="#epsilon-constraint-method" title="Link to this heading">#</a></h2>
<section id="key-concepts">
<h3>Key Concepts<a class="headerlink" href="#key-concepts" title="Link to this heading">#</a></h3>
<p>In MOO, the goal is to minimize a vector of objective functions:</p>
<div class="math notranslate nohighlight">
\[\begin{equation}
\min_{x \in X} \big(f_1(x), f_2(x), \dots, f_{n}(x)\big)
\end{equation}\]</div>
<p>Subject to:
$<span class="math notranslate nohighlight">\(\begin{equation}
g_j(x) \leq 0, \quad j = 1, \dots, m. \tag{2.1}
\end{equation}\)</span>$</p>
<p>Where <span class="math notranslate nohighlight">\(f_1, f_2, \dots, f_n\)</span> are the objectives, and <span class="math notranslate nohighlight">\(g_j(x)\)</span> are problem-specific constraints.</p>
<p>The epsilon-constrained method reformulates this problem by optimizing one objective function (e.g., <span class="math notranslate nohighlight">\(f_1(x)\)</span>), while treating the remaining objectives as constraints with thresholds <span class="math notranslate nohighlight">\(\epsilon_i\)</span> for <span class="math notranslate nohighlight">\(i \in O:\)</span> = {1, 2, <span class="math notranslate nohighlight">\(\dots, n\)</span>}. The reformulated problem is expressed as:</p>
<div class="math notranslate nohighlight">
\[\begin{equation}
\min_{x \in X} \big(f_1(x)\big)
\end{equation}\]</div>
<p>Subject to:
$<span class="math notranslate nohighlight">\(\begin{equation}
f_2(x) \leq \epsilon_2, \quad f_3(x) \leq \epsilon_3, \quad \dots, \quad f_n(x) \leq \epsilon_n,
\end{equation}\)</span><span class="math notranslate nohighlight">\(
\)</span><span class="math notranslate nohighlight">\(\begin{equation}
g_j(x) \leq 0, \quad j = 1, \dots, m. \tag{2.2}
\end{equation}\)</span>$</p>
<p>Adopted from Miettinen (1999).</p>
</section>
<section id="key-points">
<h3>Key Points<a class="headerlink" href="#key-points" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>Trade-Off Exploration</strong>: By systematically varying the values of <span class="math notranslate nohighlight">\(\epsilon_2, \epsilon_3, \dots, \epsilon_n\)</span>, it is possible to explore trade-offs between objectives and construct an approximation of the Pareto front.</p></li>
<li><p><strong>Reduction to Single Objective</strong>: The epsilon-constrained method simplifies the multi-objective problem into a single-objective problem for each choice of <span class="math notranslate nohighlight">\(\epsilon\)</span> values.</p></li>
<li><p><strong>Flexibility</strong>: Any one of the objectives can be chosen as the primary objective to optimize, allowing the user to prioritize specific goals.</p></li>
</ul>
<p>Miettinen (1999).</p>
</section>
</section>
<section id="example-design-of-chemical-reactors-for-chemical-transformations">
<h2>Example: Design of Chemical Reactors for Chemical Transformations<a class="headerlink" href="#example-design-of-chemical-reactors-for-chemical-transformations" title="Link to this heading">#</a></h2>
<p>Chemical reactors are often the most important unit operations in a chemical plant. Reactors come in many forms, however two of the most common idealizations are the continuously stirred tank reactor (CSTR) and the plug flow reactor. The CSTR is often used in modeling studies, and it can be effectively modeled as a lumped parameter system. In this example, we will consider the following reaction scheme known as the Van de Vusse reaction:</p>
<div class="math notranslate nohighlight">
\[
\text{A} \xrightarrow{k_1} \text{B} \xrightarrow{k_2} \text{C}
\]</div>
<div class="math notranslate nohighlight">
\[
2\text{A} \xrightarrow{k_3} \text{D}
\]</div>
<p>A diagram of the system is shown in figure below, where F is the volumetric flowrate. The reactor is assumed to be filled to a constant volume, and the mixture is assumed to have constant density, so the volumetric flowrate into the reactor is equal to the volumetric flowrate out of the reactor. Since the reactor is assumed to be wellmixed, the concentrations in the reactor are equivalent to the concentrations of each component flowing out of the reactor, given by <span class="math notranslate nohighlight">\(C_A\)</span>, <span class="math notranslate nohighlight">\(C_B\)</span>, <span class="math notranslate nohighlight">\(C_C\)</span>, and <span class="math notranslate nohighlight">\(C_D\)</span>.</p>
<p><img alt="process scheme" src="https://raw.githubusercontent.com/ndcbe/optimization/main/media/contrib/reactor.png" /></p>
<p>This example (both text and figure) was taken from Hart et al (2017).</p>
<p>See <a class="reference internal" href="reactor_design.html"><span class="std std-doc">Chemical Reactor Design</span></a> for the extension of this example to design a batch reactor. This notebook extends the batch reactor problem into a multi-objective optimization problem.</p>
</section>
<section id="multi-objective-optimization-to-maximize-species-b-and-c">
<h2>Multi-Objective Optimization to Maximize Species B and C<a class="headerlink" href="#multi-objective-optimization-to-maximize-species-b-and-c" title="Link to this heading">#</a></h2>
<p>In this project, species B and C are the desired products, and we are considering the dynamic state of the system (most often, industrial operations are dynamic). The goal of this work is to determine the volume of the reactor that will maximize the concentration of species B and C in the effluent after 10 minutes. Furthermore, for economic reasons, the reactor volume should not exceed <span class="math notranslate nohighlight">\(\mathrm{100\,m^3}\)</span>.</p>
<p>The mole balance for each of the species in this system under dynamic state is given by:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
&amp;\frac{dC_A}{dt}=\frac{F}{V}C_{Af}-\frac{F}{V}C_A-k_1C_A-2k_3C_A^2 \\
&amp; \frac{dC_B}{dt}=-\frac{F}{V}C_B+k_1C_A-k_2C_B\\
&amp; \frac{dC_C}{dt}=-\frac{F}{V}C_C+k_2C_B \\
&amp; \frac{dC_D}{dt}=-\frac{F}{V}C_D+k_3C_A^2
\end{align*}\end{split}\]</div>
<p>Where <span class="math notranslate nohighlight">\(C_A\)</span>, <span class="math notranslate nohighlight">\(C_B\)</span>, <span class="math notranslate nohighlight">\(C_C\)</span> and <span class="math notranslate nohighlight">\(C_D\)</span> are the concentrations of species A, B, C and D, respectively. <span class="math notranslate nohighlight">\(F\)</span> is the feed flow rate, <span class="math notranslate nohighlight">\(C_{Af}\)</span> is the concentration of species A in the feed, <span class="math notranslate nohighlight">\(k_1\)</span>, <span class="math notranslate nohighlight">\(k_2\)</span> and <span class="math notranslate nohighlight">\(k_3\)</span> are the rate constants of reaction 1 (species A to B), reaction 2 (species B to C) and reaction 3 (species A to D), respectively.</p>
<p>The data for the system are:
$<span class="math notranslate nohighlight">\(\begin{align*}
C_{Af}=10^4\,\mathrm{\frac{mol}{m^3}},\quad{k_1=\frac{5}{6}\,\mathrm{min^{-1}}},\quad{k_2=\frac{5}{3}\,\mathrm{min^{-1}}},\quad{k_3=\frac{1}{6000}\,\mathrm{\frac{m^3}{mol\cdot min}}},\quad{F=1\,\mathrm{\frac{m^3}{min}}}
\end{align*}\)</span>$</p>
<p>The data was obtained from Hart et al (2017).</p>
<section id="optimization-model-formulation">
<h3>Optimization Model Formulation<a class="headerlink" href="#optimization-model-formulation" title="Link to this heading">#</a></h3>
<p>Mathematically, we want to solve the following optimal reactor volume problem:</p>
<div class="math notranslate nohighlight">
\[\begin{split}\begin{align*}
\max_{V} \quad &amp; (C_B(t=10),\, C_C(t=10)) \\
\mathrm{s.t.} \quad &amp; \frac{dC_A}{dt}=\frac{F}{V}C_{Af}-\frac{F}{V}C_A-k_1C_A-2k_3C_A^2 \\
&amp; \frac{dC_B}{dt}=-\frac{F}{V}C_B+k_1C_A-k_2C_B \\
&amp; \frac{dC_C}{dt}=-\frac{F}{V}C_C+k_2C_B \\
&amp; \frac{dC_D}{dt}=-\frac{F}{V}C_D+k_3C_A^2 \\
&amp; V \leq 100 \\
&amp; C_A(t=0) = 10000, ~~ C_B(t=0) = 0 \\
&amp; C_C(t=0) = 0, ~~ C_D(t=0) = 0 \\
\end{align*}\end{split}\]</div>
</section>
<section id="degrees-of-freedom-analysis">
<h3>Degrees of Freedom Analysis<a class="headerlink" href="#degrees-of-freedom-analysis" title="Link to this heading">#</a></h3>
<p>From the optimization model formulated above:</p>
<p>Number of variables = 5</p>
<p>Number of equality constraints = 4</p>
<p>Therefore, the degrees of freedom = 5 - 4 = 1</p>
</section>
<section id="weighted-method-pyomo-implementation">
<h3>Weighted Method Pyomo Implementation<a class="headerlink" href="#weighted-method-pyomo-implementation" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># parameters</span>
<span class="n">conc_A_feed</span> <span class="o">=</span> <span class="mi">10000</span>  <span class="c1"># mol/m^3</span>
<span class="n">k1</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">/</span> <span class="mi">6</span>  <span class="c1"># min^-1</span>
<span class="n">k2</span> <span class="o">=</span> <span class="mi">5</span> <span class="o">/</span> <span class="mi">3</span>  <span class="c1"># min^-1</span>
<span class="n">k3</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">6000</span>  <span class="c1"># m^3/mol/min</span>
<span class="n">feed_flowrate</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># m^3/min</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Function for weighted method multi-objective dynamic model</span>
<span class="k">def</span><span class="w"> </span><span class="nf">weighted_reactor_model</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">CAF</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates reactor model with multi-objective optimization</span>
<span class="sd">    Arguments:</span>
<span class="sd">        F: feed volumetric flow rate in m^3/min</span>
<span class="sd">        CAF: feed concentration of A, gmol/m^3</span>
<span class="sd">        k1: rate constant for A to B, min^-1</span>
<span class="sd">        k2: rate constant for B to C, min^-1</span>
<span class="sd">        k3: rate constant for 2A to D, m^3/(gmol.min)</span>
<span class="sd">        w1: weights for objective 1</span>
<span class="sd">        w2: weights for objective 2</span>

<span class="sd">    Returns:</span>
<span class="sd">        model: pyomo model</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Create Pyomo model</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConcreteModel</span><span class="p">()</span>

    <span class="c1"># Define time as a continuous set</span>
    <span class="n">model</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">ContinuousSet</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>  <span class="c1"># Time from 0 to 10 minutes</span>

    <span class="c1"># Define variables</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CA</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>  <span class="c1"># Concentration of A</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CB</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>  <span class="c1"># Concentration of B</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CC</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>  <span class="c1"># Concentration of C</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CD</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>  <span class="c1"># Concentration of D</span>
    <span class="n">model</span><span class="o">.</span><span class="n">V</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="mf">11.35</span><span class="p">)</span>  <span class="c1"># Reactor volume</span>

    <span class="c1"># Define derivatives</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dCA_dt</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">DerivativeVar</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">CA</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dCB_dt</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">DerivativeVar</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">CB</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dCC_dt</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">DerivativeVar</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">CC</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dCD_dt</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">DerivativeVar</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">CD</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>

    <span class="c1"># CA differential equation</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">ca_rate_ode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">dCA_dt</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">CAF</span> <span class="o">-</span> <span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">k1</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k3</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CA_ode</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">ca_rate_ode</span><span class="p">)</span>

    <span class="c1"># CB differential equation</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cb_rate_ode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">dCB_dt</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">k1</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">k2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CB_ode</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">cb_rate_ode</span><span class="p">)</span>

    <span class="c1"># CC differential equation</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cc_rate_ode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">dCC_dt</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">k2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CC_ode</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">cc_rate_ode</span><span class="p">)</span>

    <span class="c1"># CD differential equation</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cd_rate_ode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">dCD_dt</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CD</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">k3</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CD_ode</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">cd_rate_ode</span><span class="p">)</span>
    
    <span class="c1"># Initial conditions</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">init_conditions</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">CAF</span>
        <span class="k">yield</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">yield</span> <span class="n">m</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">yield</span> <span class="n">m</span><span class="o">.</span><span class="n">CD</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="n">model</span><span class="o">.</span><span class="n">init_conditions</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConstraintList</span><span class="p">(</span><span class="n">rule</span><span class="o">=</span><span class="n">init_conditions</span><span class="p">)</span>

    <span class="c1"># Multi-objective function: weighted sum of objectives</span>
    <span class="c1"># Maximize CC (product C), CB (intermediate B)</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">objective_function</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">w1</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">+</span> <span class="n">w2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span>
    <span class="n">model</span><span class="o">.</span><span class="n">objective</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Objective</span><span class="p">(</span><span class="n">rule</span><span class="o">=</span><span class="n">objective_function</span><span class="p">,</span> <span class="n">sense</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">maximize</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">model</span>

<span class="c1"># Weights for multi-objective function</span>
<span class="n">weights</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;w1&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="s2">&quot;w2&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>

<span class="c1"># Create reactor model</span>
<span class="n">reactor_model</span> <span class="o">=</span> <span class="n">weighted_reactor_model</span><span class="p">(</span><span class="n">feed_flowrate</span><span class="p">,</span> <span class="n">conc_A_feed</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">weights</span><span class="p">[</span><span class="s2">&quot;w1&quot;</span><span class="p">],</span> <span class="n">weights</span><span class="p">[</span><span class="s2">&quot;w2&quot;</span><span class="p">])</span>

<span class="c1"># Discretize the model using collocation</span>
<span class="n">discretizer</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">TransformationFactory</span><span class="p">(</span><span class="s1">&#39;dae.collocation&#39;</span><span class="p">)</span>
<span class="n">discretizer</span><span class="o">.</span><span class="n">apply_to</span><span class="p">(</span><span class="n">reactor_model</span><span class="p">,</span> <span class="n">nfe</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">ncp</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># Solve the model</span>
<span class="n">solver</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">SolverFactory</span><span class="p">(</span><span class="s1">&#39;ipopt&#39;</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">reactor_model</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># Print results</span>
<span class="n">optimal_volume</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">V</span><span class="p">)</span>
<span class="n">optimal_CC</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1e-3</span>  <span class="c1"># kmol/m^3</span>
<span class="n">optimal_CB</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1e-3</span>  <span class="c1"># kmol/m^3</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimal reactor volume: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">optimal_volume</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> m^3&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum Concentration of C at optimal reactor volume is: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">optimal_CC</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> kmol/m^3&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum Concentration of B at optimal reactor volume is: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">optimal_CB</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s2"> kmol/m^3&quot;</span><span class="p">)</span>

<span class="c1"># Extract results for plotting</span>
<span class="n">time</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">reactor_model</span><span class="o">.</span><span class="n">t</span><span class="p">]</span> <span class="c1"># minutes</span>
<span class="n">CA_values</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">])</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time</span><span class="p">]</span> <span class="c1"># kmol/m^3</span>
<span class="n">CB_values</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="n">t</span><span class="p">])</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time</span><span class="p">]</span> <span class="c1"># kmol/m^3</span>
<span class="n">CC_values</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="n">t</span><span class="p">])</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time</span><span class="p">]</span> <span class="c1"># kmol/m^3</span>
<span class="n">CD_values</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">CD</span><span class="p">[</span><span class="n">t</span><span class="p">])</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time</span><span class="p">]</span> <span class="c1"># kmol/m^3</span>

<span class="c1"># Plot the results</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">CA_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$\mathrm{C_</span><span class="si">{A}</span><span class="s1">}$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">CB_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$\mathrm{C_</span><span class="si">{B}</span><span class="s1">}$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">CC_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$\mathrm{C_</span><span class="si">{C}</span><span class="s1">}$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">CD_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$\mathrm{C_</span><span class="si">{D}</span><span class="s1">}$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (min)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Concentration (kmol/$\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Concentration Profiles Over Time&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ipopt 3.13.2: 

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Eclipse Public License (EPL).
         For more information visit http://projects.coin-or.org/Ipopt

This version of Ipopt was compiled from source code available at
    https://github.com/IDAES/Ipopt as part of the Institute for the Design of
    Advanced Energy Systems Process Systems Engineering Framework (IDAES PSE
    Framework) Copyright (c) 2018-2019. See https://github.com/IDAES/idaes-pse.

This version of Ipopt was compiled using HSL, a collection of Fortran codes
    for large-scale scientific computation.  All technical papers, sales and
    publicity material resulting from use of the HSL codes within IPOPT must
    contain the following acknowledgement:
        HSL, a collection of Fortran codes for large-scale scientific
        computation. See http://www.hsl.rl.ac.uk.
******************************************************************************

This is Ipopt version 3.13.2, running with linear solver ma27.

Number of nonzeros in equality constraint Jacobian...:    12619
Number of nonzeros in inequality constraint Jacobian.:        0
Number of nonzeros in Lagrangian Hessian.............:     1006

Total number of variables............................:     1609
                     variables with only lower bounds:      804
                variables with lower and upper bounds:        1
                     variables with only upper bounds:        0
Total number of equality constraints.................:     1608
Total number of inequality constraints...............:        0
        inequality constraints with only lower bounds:        0
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:        0

iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
   0 -9.9999900e-03 1.00e+04 1.93e+00  -1.0 0.00e+00    -  0.00e+00 0.00e+00   0
   1 -6.9106248e-03 1.00e+04 1.72e+00  -1.0 1.06e+04    -  9.90e-07 1.71e-06f  2
   2 -5.1191593e-03 1.00e+04 1.95e+00  -1.0 1.03e+04    -  2.69e-06 1.96e-06f  2
   3 -4.7030315e-03 1.00e+04 2.43e+00  -1.0 1.01e+04    -  4.71e-06 1.37e-06f  3
   4 -5.5812242e-03 1.00e+04 2.87e+00  -1.0 1.00e+04    -  2.41e-06 2.79e-06f  2
   5 -2.7817761e-02 1.00e+04 4.64e+00  -1.0 1.00e+04    -  1.43e-06 1.31e-05f  1
   6 -3.6134940e-02 1.00e+04 7.04e+00  -1.0 1.00e+04    -  1.22e-05 4.04e-06f  1
   7 -3.9083441e-02 1.00e+04 2.17e+02  -1.0 1.00e+04    -  1.66e-05 1.43e-06f  1
   8 -2.0478875e+03 3.18e+04 1.32e+07  -1.0 1.00e+04    -  1.93e-05 9.90e-01f  1
   9 -2.0482528e+03 3.18e+04 1.32e+07  -1.0 3.25e+04    -  5.60e-05 4.99e-04f  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  10 -2.0488906e+03 3.17e+04 1.32e+07  -1.0 3.25e+04    -  5.56e-04 8.72e-04f  1
  11 -2.7715600e+03 3.11e+03 2.76e+06  -1.0 3.25e+04    -  1.45e-03 9.90e-01f  1
  12 -2.7705317e+03 3.11e+03 2.75e+06  -1.0 1.81e+03    -  4.95e-01 1.85e-03h  1
  13 -2.4623362e+03 1.38e+03 1.77e+06  -1.0 1.81e+03    -  5.56e-01 5.56e-01h  1
  14 -2.3037964e+03 7.95e+02 1.25e+06  -1.0 8.25e+02    -  8.89e-01 4.16e-01h  1
  15 -2.3030278e+03 7.93e+02 1.25e+06  -1.0 5.34e+02    -  8.54e-01 2.93e-03h  1
  16 -2.3030202e+03 7.93e+02 3.61e+06  -1.0 5.33e+02    -  1.31e-01 2.93e-05h  1
  17 -2.3030201e+03 7.93e+02 2.46e+06  -1.0 5.14e+02    -  3.40e-09 1.70e-07f  2
  18 -2.3029949e+03 7.92e+02 1.85e+06  -1.0 4.66e+02    -  2.38e-08 2.40e-04f  1
  19 -2.1978050e+03 1.29e+01 2.49e+06  -1.0 4.66e+02    -  2.37e-04 1.00e+00h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  20 -2.1854004e+03 8.65e-03 9.47e+04  -1.0 2.24e+01    -  9.90e-01 1.00e+00h  1
  21 -2.1853877e+03 2.05e-08 9.54e+02  -1.0 2.19e-02    -  9.90e-01 1.00e+00f  1
  22 -2.1853883e+03 1.67e-09 1.64e+01  -1.0 1.07e-03    -  9.83e-01 1.00e+00f  1
  23 -2.1853906e+03 2.02e-08 3.84e+06  -2.5 3.74e-03    -  6.04e-01 1.00e+00f  1
  24 -2.1867164e+03 7.06e-03 3.83e+06  -2.5 2.20e+00    -  4.26e-03 1.00e+00f  1
  25 -2.2344141e+03 1.31e+01 7.12e+05  -2.5 7.90e+01  -4.0 8.14e-01 1.00e+00f  1
  26 -2.4189753e+03 4.72e+02 4.52e+05  -2.5 3.02e+02    -  3.66e-01 1.00e+00f  1
  27 -2.3520266e+03 2.24e+02 3.90e+01  -2.5 1.05e+02  -4.5 1.00e+00 1.00e+00h  1
  28 -2.5066649e+03 6.35e+00 9.42e+00  -2.5 2.35e+02    -  1.00e+00 1.00e+00h  1
  29 -2.7982612e+03 5.21e+04 3.60e+05  -2.5 4.54e+02  -5.0 1.00e+00 1.00e+00f  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  30 -2.5091187e+03 4.80e+04 3.33e+05  -2.5 1.93e+04  -5.4 5.01e-02 6.96e-02h  4
  31 -2.4432716e+03 4.77e+04 3.31e+05  -2.5 4.84e+04  -5.9 6.67e-02 6.59e-03h  6
  32 -2.4271298e+03 4.77e+04 3.31e+05  -2.5 3.31e+05    -  1.08e-02 2.43e-04h  8
  33 -2.4191049e+03 4.77e+04 3.31e+05  -2.5 2.59e+05    -  2.42e-02 1.55e-04h  9
  34 -2.4181047e+03 4.77e+04 3.31e+05  -2.5 2.34e+05    -  3.22e-02 2.15e-05h 12
  35 -1.9061686e+03 4.73e+04 3.24e+05  -2.5 2.31e+05    -  6.00e-02 1.11e-02h  3
  36 -2.6199327e+02 5.58e+04 1.06e+05  -2.5 4.45e+04    -  1.00e+00 2.36e-01h  1
  37 -4.1639345e+02 3.57e+04 6.20e+04  -2.5 1.10e+04  -5.5 6.54e-01 1.00e+00h  1
  38 -5.2692143e+02 1.91e+04 3.40e+04  -2.5 3.94e+03  -5.1 4.11e-01 1.00e+00h  1
  39 -1.0667580e+03 2.41e+04 2.12e+04  -2.5 1.23e+04  -5.5 3.54e-01 1.00e+00h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  40 -1.4537504e+03 1.35e+04 1.26e+04  -2.5 5.72e+03  -5.1 5.30e-01 1.00e+00h  1
  41 -1.6697551e+03 1.26e+04 1.04e+04  -2.5 9.01e+03  -5.6 3.91e-01 2.18e-01h  1
  42 -1.6690656e+03 1.26e+04 1.04e+04  -2.5 8.60e+03    -  7.03e-01 5.92e-04h  1
  43 -1.6690328e+03 1.26e+04 1.04e+04  -2.5 3.60e+03    -  1.23e-03 9.46e-04h  1
  44 -1.6685485e+03 1.24e+04 1.03e+04  -2.5 3.61e+03    -  1.15e-02 1.47e-02h  1
  45 -1.6685458e+03 1.24e+04 1.03e+04  -2.5 3.57e+03    -  2.67e-04 7.86e-05h  1
  46 -1.6681612e+03 1.22e+04 1.01e+04  -2.5 3.58e+03    -  9.87e-03 1.24e-02h  1
  47 -1.6681596e+03 1.22e+04 1.01e+04  -2.5 3.54e+03    -  1.46e-04 5.05e-05h  1
  48 -1.6679040e+03 1.21e+04 1.00e+04  -2.5 3.55e+03    -  7.74e-03 8.66e-03h  1
  49 -1.6679022e+03 1.21e+04 1.00e+04  -2.5 3.53e+03    -  6.71e-05 6.23e-05h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  50 -1.6677659e+03 1.21e+04 1.00e+04  -2.5 3.53e+03    -  3.73e-03 4.77e-03h  1
  51 -1.6677059e+03 1.20e+04 9.98e+03  -2.5 3.52e+03    -  1.19e-03 2.12e-03h  1
  52 -1.6676318e+03 1.20e+04 9.95e+03  -2.5 3.52e+03    -  1.68e-03 2.62e-03h  1
  53 -1.6676301e+03 1.20e+04 9.95e+03  -2.5 3.51e+03    -  2.83e-05 6.55e-05h  1
  54 -1.6674758e+03 1.19e+04 9.90e+03  -2.5 3.51e+03    -  6.49e-04 5.72e-03h  1
  55 -1.6674752e+03 1.19e+04 9.90e+03  -2.5 3.50e+03    -  7.19e-05 2.36e-05h  1
  56 -1.6672799e+03 1.18e+04 9.82e+03  -2.5 3.50e+03    -  2.40e-03 7.80e-03h  1
  57 -1.6672792e+03 1.18e+04 9.82e+03  -2.5 3.48e+03    -  1.19e-04 2.60e-05h  1
  58 -1.6670827e+03 1.17e+04 9.74e+03  -2.5 3.49e+03    -  3.67e-04 8.64e-03h  1
  59 -1.6670820e+03 1.17e+04 9.73e+03  -2.5 3.46e+03    -  2.17e-04 2.67e-05h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  60 -1.6669107e+03 1.16e+04 9.65e+03  -2.5 3.47e+03    -  9.95e-05 8.41e-03h  1
  61 -1.6669102e+03 1.16e+04 9.65e+03  -2.5 3.45e+03    -  2.94e-04 2.54e-05h  1
  62 -1.6667758e+03 1.16e+04 9.58e+03  -2.5 3.46e+03    -  1.02e-04 7.41e-03h  1
  63 -1.6667754e+03 1.16e+04 9.58e+03  -2.5 3.43e+03    -  3.11e-04 2.23e-05h  1
  64 -1.6666791e+03 1.15e+04 9.53e+03  -2.5 3.44e+03    -  2.96e-04 5.94e-03h  1
  65 -1.6666788e+03 1.15e+04 9.53e+03  -2.5 3.42e+03    -  2.60e-04 1.82e-05h  1
  66 -1.6666165e+03 1.14e+04 9.49e+03  -2.5 3.43e+03    -  8.23e-03 4.22e-03h  1
  67 -1.6665798e+03 1.14e+04 9.46e+03  -2.5 3.42e+03    -  7.59e-04 2.66e-03h  1
  68 -1.6665679e+03 1.14e+04 9.45e+03  -2.5 3.41e+03    -  4.86e-04 8.79e-04h  1
  69 -1.6665512e+03 1.14e+04 9.44e+03  -2.5 3.41e+03    -  7.89e-04 1.25e-03h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  70 -1.6665138e+03 1.14e+04 9.41e+03  -2.5 3.41e+03    -  3.21e-04 2.98e-03h  1
  71 -1.6665133e+03 1.14e+04 9.41e+03  -2.5 3.40e+03    -  6.82e-05 3.99e-05h  1
  72 -1.6664672e+03 1.13e+04 9.37e+03  -2.5 3.40e+03    -  1.28e-03 4.05e-03h  1
  73 -1.6664669e+03 1.13e+04 9.37e+03  -2.5 3.39e+03    -  6.39e-05 2.77e-05h  1
  74 -1.6664203e+03 1.13e+04 9.33e+03  -2.5 3.39e+03    -  1.98e-03 4.66e-03h  1
  75 -1.6664198e+03 1.13e+04 9.33e+03  -2.5 3.38e+03    -  5.84e-05 5.07e-05h  1
  76 -1.6663796e+03 1.12e+04 9.29e+03  -2.5 3.38e+03    -  2.08e-03 4.70e-03h  1
  77 -1.6663468e+03 1.11e+04 9.24e+03  -2.5 3.37e+03    -  6.84e-04 4.56e-03h  1
  78 -1.6663247e+03 1.11e+04 9.21e+03  -2.5 3.36e+03    -  5.16e-04 3.65e-03h  1
  79 -1.6663106e+03 1.11e+04 9.19e+03  -2.5 3.35e+03    -  3.55e-04 2.67e-03h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  80 -1.6663029e+03 1.11e+04 9.17e+03  -2.5 3.35e+03    -  2.44e-04 1.63e-03h  1
  81 -1.6663016e+03 1.11e+04 9.17e+03  -2.5 3.34e+03    -  5.95e-05 2.82e-04h  1
  82 -1.6662983e+03 1.10e+04 9.16e+03  -2.5 3.34e+03    -  2.63e-04 7.41e-04h  1
  83 -1.6662900e+03 1.10e+04 9.14e+03  -2.5 3.34e+03    -  2.63e-04 2.01e-03h  1
  84 -1.6662804e+03 1.10e+04 9.12e+03  -2.5 3.34e+03    -  1.71e-04 2.75e-03h  1
  85 -1.6662717e+03 1.10e+04 9.09e+03  -2.5 3.33e+03    -  2.07e-04 3.15e-03h  1
  86 -1.6662651e+03 1.09e+04 9.06e+03  -2.5 3.32e+03    -  1.96e-04 3.20e-03h  1
  87 -1.6662648e+03 1.09e+04 9.06e+03  -2.5 3.31e+03    -  1.32e-04 1.89e-04h  1
  88 -1.6662608e+03 1.09e+04 9.03e+03  -2.5 3.31e+03    -  8.58e-04 2.89e-03h  1
  89 -1.6662585e+03 1.09e+04 9.00e+03  -2.5 3.31e+03    -  2.08e-04 3.30e-03h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  90 -1.6662579e+03 1.08e+04 8.99e+03  -2.5 3.30e+03    -  1.55e-04 1.88e-03h  1
  91 -1.6662579e+03 1.08e+04 8.98e+03  -2.5 3.29e+03    -  8.90e-05 1.20e-03h  1
  92 -1.6662579e+03 1.08e+04 8.97e+03  -2.5 3.29e+03    -  1.43e-04 4.14e-04h  1
  93 -1.6662584e+03 1.08e+04 8.96e+03  -2.5 3.29e+03    -  2.35e-04 1.55e-03h  1
  94 -1.6662598e+03 1.08e+04 8.94e+03  -2.5 3.29e+03    -  2.09e-04 2.30e-03h  1
  95 -1.6662623e+03 1.08e+04 8.91e+03  -2.5 3.28e+03    -  1.69e-04 2.57e-03h  1
  96 -1.6662661e+03 1.07e+04 8.89e+03  -2.5 3.27e+03    -  1.32e-04 2.70e-03h  1
  97 -1.6662705e+03 1.07e+04 8.87e+03  -2.5 3.27e+03    -  9.71e-05 2.54e-03h  1
  98 -1.6662748e+03 1.07e+04 8.85e+03  -2.5 3.26e+03    -  6.58e-05 2.08e-03h  1
  99 -1.6662823e+03 1.06e+04 8.82e+03  -2.5 3.25e+03    -  2.97e-05 3.15e-03h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
 100 -1.6662826e+03 1.06e+04 8.82e+03  -2.5 3.25e+03    -  1.10e-05 8.98e-05h  1
 101 -1.6709214e+03 3.85e+03 5.09e+03  -2.5 3.25e+03    -  6.19e-05 1.00e+00f  1
 102 -1.7047495e+03 1.89e+03 2.40e+03  -2.5 5.09e+02    -  1.47e-01 1.00e+00h  1
 103 -1.7004577e+03 1.87e+03 2.38e+03  -2.5 9.17e+02    -  4.95e-01 7.93e-03h  1
 104 -1.7042565e+03 1.82e+03 2.32e+03  -2.5 3.55e+02    -  4.50e-01 2.99e-02h  1
 105 -1.8338727e+03 9.07e+02 1.15e+03  -2.5 3.54e+02    -  2.84e-01 1.00e+00h  1
 106 -1.8728927e+03 6.99e+02 8.87e+02  -2.5 2.68e+02    -  9.59e-01 2.97e-01h  1
 107 -1.9828660e+03 3.50e+02 4.43e+02  -2.5 2.24e+02    -  1.00e+00 1.00e+00h  1
 108 -2.0025487e+03 1.98e+02 2.51e+02  -2.5 5.16e+01    -  6.87e-01 7.66e-01h  1
 109 -2.0101950e+03 1.01e+02 1.27e+02  -2.5 5.07e+01    -  1.00e+00 9.72e-01h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
 110 -2.0101958e+03 1.00e+02 1.27e+02  -2.5 1.00e+02    -  6.68e-01 1.39e-03h  1
 111r-2.0101958e+03 1.00e+02 1.00e+03   2.0 0.00e+00    -  0.00e+00 4.91e-07R  4
 112r-2.0100388e+03 1.00e+02 9.99e+02   2.0 5.94e+04    -  2.49e-03 4.76e-05f  1
 113r-2.0025462e+03 1.03e+02 1.00e+03   0.6 2.80e+04    -  6.52e-05 3.20e-03f  1
 114r-2.0095537e+03 1.05e+02 9.98e+02   0.6 2.71e+04    -  1.08e-03 1.81e-03f  1
 115r-2.0154321e+03 1.07e+02 9.97e+02   0.6 1.82e+04    -  1.62e-04 1.99e-03f  1
 116r-2.0195970e+03 1.08e+02 9.95e+02   0.6 1.35e+04    -  6.89e-04 1.68e-03f  1
 117r-2.0237942e+03 1.09e+02 9.93e+02   0.6 1.24e+04    -  2.15e-03 1.92e-03f  1
 118r-2.0298846e+03 1.09e+02 9.90e+02   0.6 9.82e+03    -  4.63e-03 2.96e-03f  1
 119r-2.0384854e+03 1.11e+02 9.86e+02   0.6 7.05e+03    -  1.10e-02 4.51e-03f  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
 120r-2.0509912e+03 1.11e+02 5.12e+03   0.6 5.98e+03    -  4.14e-02 7.58e-03f  1
 121r-2.0698248e+03 1.11e+02 8.12e+03   0.6 4.19e+03    -  4.22e-02 1.43e-02f  1
 122r-2.0881157e+03 1.12e+02 1.82e+04   0.6 3.21e+03    -  1.41e-01 1.75e-02f  1
 123r-2.1113751e+03 1.11e+02 2.18e+04   0.6 2.21e+03    -  1.21e-01 3.09e-02f  1
 124r-2.1267149e+03 1.06e+02 3.00e+04   0.6 1.54e+03    -  3.62e-01 2.93e-02f  1
 125r-2.1428597e+03 9.95e+01 2.92e+04   0.6 9.30e+02    -  3.40e-01 4.76e-02f  1
 126r-2.1547936e+03 8.90e+01 2.54e+04   0.6 8.30e+02    -  4.58e-01 5.06e-02f  1
 127 -2.1855501e+03 4.80e-01 1.05e+01  -2.5 6.97e+01    -  6.49e-01 9.97e-01h  1
 128 -2.1853909e+03 4.87e-04 5.71e+01  -2.5 3.77e-01    -  9.25e-01 9.99e-01h  1
 129 -2.1855496e+03 1.01e-04 1.99e+05  -2.5 2.63e-01    -  3.52e-02 1.00e+00f  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
 130 -2.3394033e+03 3.44e+04 2.63e+05  -2.5 5.04e+02    -  5.84e-04 5.06e-01f  1
 131 -2.2534031e+03 2.22e+04 2.03e+05  -2.5 9.20e+02    -  1.93e-01 5.00e-01h  2
 132 -2.2082517e+03 2.17e+04 1.89e+05  -2.5 9.62e+03    -  6.62e-02 2.43e-02h  6
 133 -2.1854414e+03 2.15e+04 1.77e+05  -2.5 1.48e+04    -  5.94e-02 7.30e-03h  7
 134 -2.1847277e+03 2.15e+04 1.67e+05  -2.5 1.54e+04    -  6.63e-02 2.12e-04h 12
 135 -2.1843709e+03 2.15e+04 1.67e+05  -2.5 1.56e+04    -  7.09e-02 1.05e-04h 13
 136 -7.2312935e+02 2.96e+04 3.53e+05  -2.5 1.52e+04    -  8.04e-02 4.38e-01h  1
 137 -7.6288462e+02 1.28e+04 2.06e+05  -2.5 1.10e+03  -4.3 5.61e-02 1.00e+00h  1
 138 -1.5794751e+03 1.80e+04 1.36e+05  -2.5 1.14e+04  -4.7 2.20e-01 1.00e+00h  1
 139 -2.1381827e+03 1.05e+04 8.03e+04  -2.5 4.04e+03  -4.3 3.93e-01 1.00e+00h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
 140 -2.4082459e+03 4.22e+03 4.60e+04  -2.5 2.09e+03  -3.9 6.57e-01 1.00e+00h  1
 141 -2.6360795e+03 1.76e+03 2.35e+04  -2.5 8.97e+02  -3.5 9.02e-01 1.00e+00h  1
 142 -2.7892466e+03 8.03e+02 1.15e+04  -2.5 4.77e+02  -3.0 9.25e-01 1.00e+00h  1
 143 -2.7582316e+03 3.25e+02 5.66e+03  -2.5 1.34e+02  -2.6 9.85e-01 1.00e+00h  1
 144 -2.6864739e+03 1.83e+02 2.50e+03  -2.5 1.78e+02  -3.1 1.00e+00 1.00e+00h  1
 145 -2.6285441e+03 4.37e+01 8.50e+02  -2.5 1.03e+02  -2.7 1.00e+00 1.00e+00h  1
 146 -2.6162486e+03 5.37e+00 1.36e+02  -2.5 1.88e+01  -3.1 1.00e+00 1.00e+00h  1
 147 -2.6205639e+03 2.49e-02 1.80e+00  -2.5 8.15e+00  -3.6 1.00e+00 1.00e+00h  1
 148 -2.8300964e+03 1.50e+03 4.49e+01  -2.5 3.82e+02    -  1.00e+00 1.00e+00f  1
 149 -2.7758742e+03 6.40e+02 2.15e+01  -2.5 9.63e+01    -  1.00e+00 1.00e+00h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
 150 -2.7264449e+03 1.68e+02 8.71e+00  -2.5 1.07e+02    -  1.00e+00 1.00e+00h  1
 151 -2.7239427e+03 6.53e+00 1.29e+00  -2.5 5.22e+01    -  1.00e+00 1.00e+00h  1
 152 -2.7238103e+03 1.71e-01 3.48e-02  -2.5 1.37e+01    -  1.00e+00 1.00e+00h  1
 153 -2.7236895e+03 1.16e-04 2.36e-05  -2.5 1.94e-01    -  1.00e+00 1.00e+00h  1
 154 -2.7236899e+03 5.79e-04 4.74e+01  -5.7 5.37e-01    -  1.00e+00 1.00e+00h  1
 155 -2.7236897e+03 7.00e-10 1.85e-11  -5.7 3.17e-04    -  1.00e+00 1.00e+00h  1
 156 -2.7236897e+03 2.47e-10 7.14e-13  -8.6 3.50e-04    -  1.00e+00 1.00e+00h  1

Number of Iterations....: 156

                                   (scaled)                 (unscaled)
Objective...............:  -2.7236897097349824e+03   -2.7236897097349824e+03
Dual infeasibility......:   7.1357223967104319e-13    7.1357223967104319e-13
Constraint violation....:   2.4692781153135002e-10    2.4692781153135002e-10
Complementarity.........:   2.5066260979429508e-09    2.5066260979429508e-09
Overall NLP error.......:   2.5066260979429508e-09    2.5066260979429508e-09


Number of objective function evaluations             = 242
Number of objective gradient evaluations             = 143
Number of equality constraint evaluations            = 242
Number of inequality constraint evaluations          = 0
Number of equality constraint Jacobian evaluations   = 158
Number of inequality constraint Jacobian evaluations = 0
Number of Lagrangian Hessian evaluations             = 156
Total CPU secs in IPOPT (w/o function evaluations)   =      0.692
Total CPU secs in NLP function evaluations           =      0.024

EXIT: Optimal Solution Found.
Optimal reactor volume: 9.02 m^3
Maximum Concentration of C at optimal reactor volume is: 5.03 kmol/m^3
Maximum Concentration of B at optimal reactor volume is: 0.42 kmol/m^3
</pre></div>
</div>
<img alt="../../_images/4f184eeba750e55305b6141878b93be44b60427ef2fbe3cee9762ef776dbd2cd.png" src="../../_images/4f184eeba750e55305b6141878b93be44b60427ef2fbe3cee9762ef776dbd2cd.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Visualizing Pareto Front</span>
<span class="k">def</span><span class="w"> </span><span class="nf">generate_weights</span><span class="p">(</span><span class="n">n_points</span><span class="p">):</span> <span class="c1"># Function to systematically generate weight combinations</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates weights for objective function</span>
<span class="sd">    Argument:</span>
<span class="sd">        n_points: number of points to evaluate weights</span>

<span class="sd">    Returns:</span>
<span class="sd">        w1: weight vector for objective 1</span>
<span class="sd">        w2: weight vector for objective 2&quot;&quot;&quot;</span>
    
    <span class="n">w1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">n_points</span><span class="p">)</span>
    <span class="n">w2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="n">w1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">w1</span><span class="p">))]</span>
    <span class="k">return</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span>

<span class="c1"># number of points for weights</span>
<span class="n">n_points</span> <span class="o">=</span> <span class="mi">60</span>

<span class="c1"># Generate valid weight combinations</span>
<span class="n">w1</span><span class="p">,</span> <span class="n">w2</span> <span class="o">=</span> <span class="n">generate_weights</span><span class="p">(</span><span class="n">n_points</span><span class="p">)</span>

<span class="c1"># Generate Pareto front by scanning weights</span>
<span class="n">pareto_data</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># Iterate over each weight combination</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">w1</span><span class="p">)):</span>
    <span class="c1"># Create and solve the model with the given weights</span>
    <span class="n">reactor_model</span> <span class="o">=</span> <span class="n">weighted_reactor_model</span><span class="p">(</span><span class="n">feed_flowrate</span><span class="p">,</span> <span class="n">conc_A_feed</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">w1</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">w2</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">discretizer</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">TransformationFactory</span><span class="p">(</span><span class="s1">&#39;dae.collocation&#39;</span><span class="p">)</span>
    <span class="n">discretizer</span><span class="o">.</span><span class="n">apply_to</span><span class="p">(</span><span class="n">reactor_model</span><span class="p">,</span> <span class="n">nfe</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">ncp</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">solver</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">SolverFactory</span><span class="p">(</span><span class="s1">&#39;ipopt&#39;</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">reactor_model</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">results</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">termination_condition</span> <span class="o">==</span> <span class="n">pyo</span><span class="o">.</span><span class="n">TerminationCondition</span><span class="o">.</span><span class="n">optimal</span><span class="p">:</span>
        <span class="n">optimal_volume</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">V</span><span class="p">)</span>
        <span class="n">optimal_CC</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1e-3</span>  <span class="c1"># kmol/m^3</span>
        <span class="n">optimal_CB</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1e-3</span>  <span class="c1"># kmol/m^3</span>
        <span class="n">pareto_data</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">w1</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">w2</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">optimal_CC</span><span class="p">,</span> <span class="n">optimal_CB</span><span class="p">,</span> <span class="n">optimal_volume</span><span class="p">))</span>

<span class="c1"># Convert Pareto data to a structured format for analysis</span>
<span class="n">pareto_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pareto_data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;w1&quot;</span><span class="p">,</span> <span class="s2">&quot;w2&quot;</span><span class="p">,</span> <span class="s2">&quot;CC&quot;</span><span class="p">,</span> <span class="s2">&quot;CB&quot;</span><span class="p">,</span> <span class="s2">&quot;V&quot;</span><span class="p">])</span>

<span class="c1"># Plotting the 3D Pareto front</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
<span class="n">scatter</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">pareto_df</span><span class="p">[</span><span class="s1">&#39;CC&#39;</span><span class="p">],</span> <span class="n">pareto_df</span><span class="p">[</span><span class="s1">&#39;CB&#39;</span><span class="p">],</span> <span class="n">pareto_df</span><span class="p">[</span><span class="s1">&#39;V&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="n">pareto_df</span><span class="p">[</span><span class="s1">&#39;V&#39;</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s2">&quot;in&quot;</span><span class="p">,</span><span class="n">top</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Conc. of C (kmol/$\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Conc. of B (kmol/$\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s1">&#39;Volume ($\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Weighted Method 3D Pareto Front&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">color_bar</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">scatter</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">color_bar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Volume ($\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1b8b5c7e2bac42c4da4a90e65e60889309c0d362681300f828a983a21bcf9777.png" src="../../_images/1b8b5c7e2bac42c4da4a90e65e60889309c0d362681300f828a983a21bcf9777.png" />
</div>
</div>
</section>
<section id="epsilon-constraint-method-pyomo-implementation">
<h3>Epsilon-Constraint Method Pyomo Implementation<a class="headerlink" href="#epsilon-constraint-method-pyomo-implementation" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Function for epsilon-constraint method multi-objective dynamic model</span>
<span class="k">def</span><span class="w"> </span><span class="nf">create_epsilon_model</span><span class="p">(</span><span class="n">F</span><span class="p">,</span> <span class="n">CAF</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">epsilon_CB</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Solves multi-objective optimization using epsilon constraint method</span>
<span class="sd">    Arguments:</span>
<span class="sd">        F: feed volumetric flow rate in m^3/min</span>
<span class="sd">        CAF: feed concentration of A, gmol/m^3</span>
<span class="sd">        k1: rate constant for A to B, min^-1</span>
<span class="sd">        k2: rate constant for B to C, min^-1</span>
<span class="sd">        k3: rate constant for 2A to D, m^3/(gmol.min)</span>
<span class="sd">        epsilon_CB: constraint threshold of concentration of B</span>

<span class="sd">    Returns:</span>
<span class="sd">        model: pyomo model</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">model</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConcreteModel</span><span class="p">()</span>

    <span class="c1"># Define time as a continuous set</span>
    <span class="n">model</span><span class="o">.</span><span class="n">t</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">ContinuousSet</span><span class="p">(</span><span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
    
    <span class="c1"># Variables</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CA</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CB</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CC</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CD</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">V</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Var</span><span class="p">(</span><span class="n">within</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">NonNegativeReals</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">),</span> <span class="n">initialize</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    
    <span class="c1"># Derivatives</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dCA_dt</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">DerivativeVar</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">CA</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dCB_dt</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">DerivativeVar</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">CB</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dCC_dt</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">DerivativeVar</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">CC</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">dCD_dt</span> <span class="o">=</span> <span class="n">dae</span><span class="o">.</span><span class="n">DerivativeVar</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">CD</span><span class="p">,</span> <span class="n">wrt</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    
    <span class="c1"># CA differential equation</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">ca_rate_ode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">dCA_dt</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">CAF</span> <span class="o">-</span> <span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">k1</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">k3</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CA_ode</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">ca_rate_ode</span><span class="p">)</span>

    <span class="c1"># CB differential equation</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cb_rate_ode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">dCB_dt</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">k1</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">-</span> <span class="n">k2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CB_ode</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">cb_rate_ode</span><span class="p">)</span>

    <span class="c1"># CC differential equation</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cc_rate_ode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">dCC_dt</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">k2</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="n">t</span><span class="p">]</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CC_ode</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">cc_rate_ode</span><span class="p">)</span>

    <span class="c1"># CD differential equation</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cd_rate_ode</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">m</span><span class="o">.</span><span class="n">dCD_dt</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="p">(</span><span class="n">F</span> <span class="o">/</span> <span class="n">m</span><span class="o">.</span><span class="n">V</span><span class="p">)</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CD</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">+</span> <span class="n">k3</span> <span class="o">*</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span>
    <span class="n">model</span><span class="o">.</span><span class="n">CD_ode</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">rule</span><span class="o">=</span><span class="n">cd_rate_ode</span><span class="p">)</span>

    <span class="c1"># Initial conditions</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">init_conditions</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">m</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">CAF</span>
        <span class="k">yield</span> <span class="n">m</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">yield</span> <span class="n">m</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">yield</span> <span class="n">m</span><span class="o">.</span><span class="n">CD</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="n">model</span><span class="o">.</span><span class="n">init_conditions</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">ConstraintList</span><span class="p">(</span><span class="n">rule</span><span class="o">=</span><span class="n">init_conditions</span><span class="p">)</span>
    
    <span class="c1"># Epsilon constraints </span>
    <span class="n">model</span><span class="o">.</span><span class="n">epsilon_constraint_CB</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Constraint</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">epsilon_CB</span><span class="p">)</span> <span class="c1"># converting CB to constraint</span>
    
    <span class="c1"># Objective: Minimize volume</span>
    <span class="n">model</span><span class="o">.</span><span class="n">objective</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">Objective</span><span class="p">(</span><span class="n">expr</span><span class="o">=</span><span class="n">model</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">sense</span><span class="o">=</span><span class="n">pyo</span><span class="o">.</span><span class="n">maximize</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">model</span>

<span class="c1"># constraint threshold</span>
<span class="n">epsilon_CB_values</span> <span class="o">=</span> <span class="mi">420</span>

<span class="c1"># Create reactor model</span>
<span class="n">reactor_model_epsilon</span> <span class="o">=</span> <span class="n">create_epsilon_model</span><span class="p">(</span><span class="n">feed_flowrate</span><span class="p">,</span> <span class="n">conc_A_feed</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">epsilon_CB_values</span><span class="p">)</span>

<span class="c1"># Discretize the model using collocation</span>
<span class="n">discretizer</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">TransformationFactory</span><span class="p">(</span><span class="s1">&#39;dae.collocation&#39;</span><span class="p">)</span>
<span class="n">discretizer</span><span class="o">.</span><span class="n">apply_to</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="p">,</span> <span class="n">nfe</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">ncp</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">solver</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">SolverFactory</span><span class="p">(</span><span class="s1">&#39;ipopt&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">pyo</span><span class="o">.</span><span class="n">SolverStatus</span><span class="o">.</span><span class="n">ok</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">termination_condition</span> <span class="o">==</span> <span class="n">pyo</span><span class="o">.</span><span class="n">TerminationCondition</span><span class="o">.</span><span class="n">optimal</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Solver found an optimal solution.&quot;</span><span class="p">)</span>
    <span class="n">optimal_volume</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">V</span><span class="p">)</span>
    <span class="n">final_concentration_C</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1e-3</span>
    <span class="n">final_concentration_B</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span> <span class="o">*</span> <span class="mf">1e-3</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Optimal Reactor Volume: </span><span class="si">{</span><span class="n">optimal_volume</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> m^3&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum Concentration of B at optimal reactor volume is: </span><span class="si">{</span><span class="n">final_concentration_B</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> kmol/m^3&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum Concentration of C at optimal reactor volume is: </span><span class="si">{</span><span class="n">final_concentration_C</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> kmol/m^3&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Solver did not find an optimal solution. Status:&quot;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">status</span><span class="p">)</span>

<span class="c1"># Extract results for plotting</span>
<span class="n">time</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">t</span><span class="p">]</span> <span class="c1"># minutes</span>
<span class="n">CA_values</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">CA</span><span class="p">[</span><span class="n">t</span><span class="p">])</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time</span><span class="p">]</span> <span class="c1"># kmol/m^3</span>
<span class="n">CB_values</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="n">t</span><span class="p">])</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time</span><span class="p">]</span> <span class="c1"># kmol/m^3</span>
<span class="n">CC_values</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="n">t</span><span class="p">])</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time</span><span class="p">]</span> <span class="c1"># kmol/m^3</span>
<span class="n">CD_values</span> <span class="o">=</span> <span class="p">[(</span><span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">CD</span><span class="p">[</span><span class="n">t</span><span class="p">])</span><span class="o">*</span><span class="mi">10</span><span class="o">**</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">))</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time</span><span class="p">]</span> <span class="c1"># kmol/m^3</span>

<span class="c1"># Plot the results</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">CA_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$\mathrm{C_</span><span class="si">{A}</span><span class="s1">}$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">CB_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$\mathrm{C_</span><span class="si">{B}</span><span class="s1">}$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">CC_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$\mathrm{C_</span><span class="si">{C}</span><span class="s1">}$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">CD_values</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;$\mathrm{C_</span><span class="si">{D}</span><span class="s1">}$&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (min)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Concentration (kmol/$\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Concentration Profiles Over Time&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Ipopt 3.13.2: 

******************************************************************************
This program contains Ipopt, a library for large-scale nonlinear optimization.
 Ipopt is released as open source code under the Eclipse Public License (EPL).
         For more information visit http://projects.coin-or.org/Ipopt

This version of Ipopt was compiled from source code available at
    https://github.com/IDAES/Ipopt as part of the Institute for the Design of
    Advanced Energy Systems Process Systems Engineering Framework (IDAES PSE
    Framework) Copyright (c) 2018-2019. See https://github.com/IDAES/idaes-pse.

This version of Ipopt was compiled using HSL, a collection of Fortran codes
    for large-scale scientific computation.  All technical papers, sales and
    publicity material resulting from use of the HSL codes within IPOPT must
    contain the following acknowledgement:
        HSL, a collection of Fortran codes for large-scale scientific
        computation. See http://www.hsl.rl.ac.uk.
******************************************************************************

This is Ipopt version 3.13.2, running with linear solver ma27.

Number of nonzeros in equality constraint Jacobian...:    12619
Number of nonzeros in inequality constraint Jacobian.:        1
Number of nonzeros in Lagrangian Hessian.............:     1006

Total number of variables............................:     1609
                     variables with only lower bounds:      804
                variables with lower and upper bounds:        1
                     variables with only upper bounds:        0
Total number of equality constraints.................:     1608
Total number of inequality constraints...............:        1
        inequality constraints with only lower bounds:        1
   inequality constraints with lower and upper bounds:        0
        inequality constraints with only upper bounds:        0

iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
   0 -9.9999900e-03 1.00e+04 2.28e+00  -1.0 0.00e+00    -  0.00e+00 0.00e+00   0
   1 -4.8598389e-03 1.00e+04 3.18e+01  -1.0 1.89e+04    -  9.90e-07 3.28e-05h  1
   2 -4.8257425e-03 1.00e+04 3.18e+01  -1.0 1.83e+04    -  3.34e-05 3.81e-05h  1
   3 -9.4551719e-03 9.90e+03 3.90e+04  -1.0 1.83e+04    -  7.14e-05 9.73e-03f  1
   4 -9.5086577e-03 9.90e+03 3.90e+04  -1.0 1.86e+04    -  2.53e-04 9.82e-05f  1
   5r-9.5086577e-03 9.90e+03 9.99e+02   4.0 0.00e+00    -  0.00e+00 4.92e-07R  2
   6r-1.1686406e+01 9.90e+03 8.24e+05   4.0 1.53e+04    -  8.22e-06 2.46e-03f  1
   7r-1.6308831e+01 9.87e+03 4.90e+05   4.0 8.22e+02    -  5.17e-01 2.20e-01f  1
   8r-1.3016905e+01 9.88e+03 3.58e+05   3.3 3.49e+02    -  5.65e-01 5.32e-01f  1
   9r-1.3735757e+01 9.88e+03 2.13e+05   3.3 1.04e+02    -  1.00e+00 7.03e-01f  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  10r-1.0871961e+01 9.89e+03 1.05e+05   3.3 2.81e+01    -  8.29e-01 1.00e+00f  1
  11r-9.4210741e+00 9.91e+03 5.95e+04   2.6 4.06e+01    -  1.00e+00 7.51e-01f  1
  12r-1.1429075e+01 9.91e+03 2.98e+04   2.6 1.25e+02    -  1.00e+00 8.86e-01f  1
  13r-1.1915976e+01 9.91e+03 1.30e+04   2.6 1.29e+01    -  1.00e+00 1.00e+00f  1
  14r-9.9938062e+00 9.93e+03 7.86e+03   1.9 5.17e+01    -  7.28e-01 6.37e-01f  1
  15r-1.1032288e+01 9.92e+03 4.99e+03   1.9 2.46e+02    -  1.00e+00 4.95e-01f  1
  16r-9.5439326e+00 9.91e+03 2.67e+03   1.2 1.11e+02    -  7.60e-01 8.46e-01f  1
  17r-1.0596755e+01 9.89e+03 2.12e+03   1.2 5.88e+02    -  6.54e-01 2.35e-01f  1
  18r-1.2101202e+01 9.87e+03 1.49e+03   1.2 4.69e+02    -  1.00e+00 3.58e-01f  1
  19r-1.2133836e+01 9.87e+03 5.80e+02   1.2 3.03e+02    -  1.00e+00 1.21e-02f  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  20r-1.3127762e+01 9.83e+03 2.63e+02   0.5 3.01e+02    -  8.75e-01 8.24e-01f  1
  21r-1.7684525e+01 9.77e+03 1.91e+02   0.5 1.36e+03    -  2.67e-01 3.32e-01f  1
  22r-2.0529528e+01 9.73e+03 2.09e+02  -0.2 8.99e+02    -  4.24e-01 3.23e-01f  1
  23r-2.1186706e+01 9.72e+03 3.16e+02  -0.2 3.42e+03    -  2.63e-01 1.87e-02f  1
  24r-3.0164095e+01 9.60e+03 2.07e+02  -0.2 3.34e+03    -  2.18e-01 2.59e-01f  1
  25r-3.2513482e+01 9.57e+03 2.33e+02  -0.2 2.42e+03    -  5.43e-01 9.20e-02f  1
  26r-3.8644532e+01 9.49e+03 2.41e+02  -0.2 2.18e+03    -  1.00e+00 2.66e-01f  1
  27r-5.4811872e+01 9.28e+03 5.94e+00  -0.2 1.55e+03    -  1.00e+00 9.79e-01f  1
  28r-5.4592211e+01 9.28e+03 2.53e-02  -0.2 3.06e+01    -  1.00e+00 1.00e+00h  1
  29r-5.4474224e+01 9.28e+03 7.13e+01  -2.4 1.73e+00    -  9.94e-01 7.16e-01f  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  30r-5.7067904e+01 9.25e+03 1.08e+02  -2.4 3.49e+04    -  4.36e-02 6.34e-03f  1
  31r-6.0576269e+01 9.21e+03 1.42e+02  -2.4 3.45e+04    -  4.61e-02 8.63e-03f  1
  32r-6.3326429e+01 9.18e+03 1.41e+02  -2.4 3.41e+04    -  6.88e-03 6.82e-03f  1
  33r-6.7503485e+01 9.13e+03 1.47e+02  -2.4 3.37e+04    -  1.89e-02 1.04e-02f  1
  34r-7.1226433e+01 9.09e+03 2.11e+02  -2.4 3.30e+04    -  4.90e-02 9.43e-03f  1
  35r-9.8261702e+01 8.78e+03 1.53e+02  -2.4 3.25e+04    -  4.23e-02 6.95e-02f  1
  36 -9.8265110e+01 8.78e+03 3.84e+00  -1.0 1.46e+04    -  1.12e-07 3.99e-07f  1
  37 -9.8265544e+01 8.78e+03 7.64e+00  -1.0 1.41e+04    -  8.05e-08 3.28e-08f  1
  38 -9.8268084e+01 8.78e+03 3.92e+00  -1.0 1.40e+04    -  1.01e-07 1.83e-07f  1
  39 -2.3207517e+03 1.42e+04 2.93e+08  -1.0 1.40e+04    -  3.18e-07 1.60e-01f  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  40 -2.4052259e+03 1.23e+04 6.63e+08  -1.0 2.54e+04    -  1.72e-05 9.90e-01f  1
  41 -2.4527209e+03 1.18e+04 6.38e+08  -1.0 1.30e+04   0.0 3.33e-01 3.99e-02h  1
  42r-2.4527209e+03 1.18e+04 1.00e+03   3.9 0.00e+00  -0.5 0.00e+00 4.63e-07R  4
  43r-2.3350121e+03 1.01e+04 4.48e+04   3.9 1.17e+05    -  7.55e-03 2.27e-02f  1
  44 -2.4417906e+03 8.89e+03 1.44e+03  -1.0 1.25e+04    -  1.98e-01 1.16e-01f  1
  45 -2.4447617e+03 8.86e+03 1.44e+03  -1.0 1.10e+04    -  1.08e-01 2.99e-03h  1
  46 -3.4820052e+03 1.01e+03 9.36e+03  -1.0 1.09e+04    -  7.34e-02 9.90e-01f  1
  47 -4.5367172e+03 3.39e+02 1.73e+03  -1.0 1.07e+03    -  3.69e-01 9.90e-01f  1
  48 -4.9748649e+03 6.98e+01 1.02e+03  -1.0 4.81e+02    -  8.17e-01 9.91e-01f  1
  49 -5.0264431e+03 4.22e+00 1.14e+04  -1.0 6.99e+01    -  9.81e-01 1.00e+00h  1
iter    objective    inf_pr   inf_du lg(mu)  ||d||  lg(rg) alpha_du alpha_pr  ls
  50 -5.0273073e+03 1.63e-02 3.07e+04  -1.0 1.41e+00    -  9.97e-01 1.00e+00h  1
  51 -5.0272545e+03 2.47e-05 7.31e-05  -1.0 1.22e-01    -  1.00e+00 1.00e+00h  1
  52 -5.0273606e+03 1.18e-04 6.11e+05  -5.7 2.57e-01    -  1.00e+00 9.39e-01f  1
  53 -5.0273605e+03 1.02e-10 2.19e-10  -5.7 8.81e-05    -  1.00e+00 1.00e+00h  1
  54 -5.0273605e+03 9.46e-11 2.45e-13  -8.6 4.20e-06    -  1.00e+00 1.00e+00h  1

Number of Iterations....: 54

                                   (scaled)                 (unscaled)
Objective...............:  -5.0273605021725707e+03   -5.0273605021725707e+03
Dual infeasibility......:   2.4547299726352162e-13    2.4547299726352162e-13
Constraint violation....:   6.8639442846867003e-11    9.4587448984384550e-11
Complementarity.........:   2.5059121858108535e-09    2.5059121858108535e-09
Overall NLP error.......:   2.5059121858108535e-09    2.5059121858108535e-09


Number of objective function evaluations             = 61
Number of objective gradient evaluations             = 26
Number of equality constraint evaluations            = 61
Number of inequality constraint evaluations          = 61
Number of equality constraint Jacobian evaluations   = 57
Number of inequality constraint Jacobian evaluations = 57
Number of Lagrangian Hessian evaluations             = 54
Total CPU secs in IPOPT (w/o function evaluations)   =      0.168
Total CPU secs in NLP function evaluations           =      0.007

EXIT: Optimal Solution Found.
Solver found an optimal solution.
Optimal Reactor Volume: 8.97 m^3
Maximum Concentration of B at optimal reactor volume is: 0.42 kmol/m^3
Maximum Concentration of C at optimal reactor volume is: 5.03 kmol/m^3
</pre></div>
</div>
<img alt="../../_images/84a46517fbda094ae20827abd59a40d3f642b95a485616952839af7fd01b6b36.png" src="../../_images/84a46517fbda094ae20827abd59a40d3f642b95a485616952839af7fd01b6b36.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Visualizing Pareto Front</span>
<span class="n">num_samples</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># sample amount</span>

<span class="c1"># constraint threshold</span>
<span class="n">epsilon_CB_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="n">num_samples</span><span class="p">)</span>

<span class="c1"># Store results</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># loop through all constraint threshold values</span>
<span class="k">for</span> <span class="n">epsilon_CB</span> <span class="ow">in</span> <span class="n">epsilon_CB_values</span><span class="p">:</span>
    <span class="n">reactor_model_epsilon</span> <span class="o">=</span> <span class="n">create_epsilon_model</span><span class="p">(</span><span class="n">feed_flowrate</span><span class="p">,</span> <span class="n">conc_A_feed</span><span class="p">,</span> <span class="n">k1</span><span class="p">,</span> <span class="n">k2</span><span class="p">,</span> <span class="n">k3</span><span class="p">,</span> <span class="n">epsilon_CB</span><span class="p">)</span> <span class="c1"># reactor model</span>

    <span class="c1"># Discretize the model using collocation</span>
    <span class="n">discretizer</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">TransformationFactory</span><span class="p">(</span><span class="s1">&#39;dae.collocation&#39;</span><span class="p">)</span>
    <span class="n">discretizer</span><span class="o">.</span><span class="n">apply_to</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="p">,</span> <span class="n">nfe</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">ncp</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    
    <span class="n">solver</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">SolverFactory</span><span class="p">(</span><span class="s1">&#39;ipopt&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">solve</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="p">,</span> <span class="n">tee</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">status</span> <span class="o">==</span> <span class="n">pyo</span><span class="o">.</span><span class="n">SolverStatus</span><span class="o">.</span><span class="n">ok</span> <span class="ow">and</span> <span class="n">result</span><span class="o">.</span><span class="n">solver</span><span class="o">.</span><span class="n">termination_condition</span> <span class="o">==</span> <span class="n">pyo</span><span class="o">.</span><span class="n">TerminationCondition</span><span class="o">.</span><span class="n">optimal</span><span class="p">):</span>
        <span class="n">optimal_volume</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">V</span><span class="p">)</span>
        <span class="n">opt_concentration_CB</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">CB</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
        <span class="n">opt_concentration_CC</span> <span class="o">=</span> <span class="n">pyo</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">reactor_model_epsilon</span><span class="o">.</span><span class="n">CC</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>

        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
            <span class="s1">&#39;epsilon_CB&#39;</span><span class="p">:</span> <span class="n">epsilon_CB</span><span class="p">,</span>
            <span class="s1">&#39;optimal_volume&#39;</span><span class="p">:</span> <span class="n">optimal_volume</span><span class="p">,</span>
            <span class="s1">&#39;opt_concentration_CB&#39;</span><span class="p">:</span> <span class="n">opt_concentration_CB</span><span class="p">,</span>
            <span class="s1">&#39;opt_concentration_CC&#39;</span><span class="p">:</span> <span class="n">opt_concentration_CC</span>
        <span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to find optimal solution for ε_CB = </span><span class="si">{</span><span class="n">epsilon_CB</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">results_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">results_df</span><span class="p">)</span>

<span class="c1"># Plotting the 3D Pareto front</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">&#39;3d&#39;</span><span class="p">)</span>
<span class="n">scatter</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">results_df</span><span class="p">[</span><span class="s1">&#39;opt_concentration_CC&#39;</span><span class="p">]</span><span class="o">*</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">results_df</span><span class="p">[</span><span class="s1">&#39;opt_concentration_CB&#39;</span><span class="p">]</span><span class="o">*</span><span class="mf">1e-3</span><span class="p">,</span> <span class="n">results_df</span><span class="p">[</span><span class="s1">&#39;optimal_volume&#39;</span><span class="p">],</span> <span class="n">c</span><span class="o">=</span><span class="n">results_df</span><span class="p">[</span><span class="s1">&#39;optimal_volume&#39;</span><span class="p">],</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;viridis&#39;</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;z&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s2">&quot;in&quot;</span><span class="p">,</span><span class="n">top</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Conc. of C (kmol/$\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Conc. of B (kmol/$\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s1">&#39;Volume ($\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Epsilon-Constrainted Method 3D Pareto Front&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">color_bar</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">scatter</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">color_bar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s1">&#39;Volume ($\mathbf{m^3}$)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>    epsilon_CB  optimal_volume  opt_concentration_CB  opt_concentration_CC
0   400.000000        9.643572            399.999996           5044.649783
1   406.122449        9.431184            406.122445           5040.039755
2   412.244898        9.225387            412.244894           5034.826198
3   418.367347        9.025888            418.367343           5029.012010
4   424.489796        8.832410            424.489792           5022.600211
5   430.612245        8.644690            430.612241           5015.593948
6   436.734694        8.462483            436.734690           5007.996486
7   442.857143        8.285555            442.857138           4999.811213
8   448.979592        8.113687            448.979587           4991.041629
9   455.102041        7.946670            455.102036           4981.691353
10  461.224490        7.784306            461.224485           4971.764111
11  467.346939        7.626410            467.346934           4961.263742
12  473.469388        7.472804            473.469383           4950.194188
13  479.591837        7.323319            479.591832           4938.559499
14  485.714286        7.177797            485.714281           4926.363821
15  491.836735        7.036085            491.836730           4913.611402
16  497.959184        6.898039            497.959179           4900.306584
17  504.081633        6.763523            504.081628           4886.453801
18  510.204082        6.632405            510.204077           4872.057574
19  516.326531        6.504561            516.326525           4857.122514
20  522.448980        6.379872            522.448974           4841.653310
21  528.571429        6.258227            528.571423           4825.654734
22  534.693878        6.139515            534.693872           4809.131631
23  540.816327        6.023636            540.816321           4792.088918
24  546.938776        5.910489            546.938770           4774.531582
25  553.061224        5.799982            553.061219           4756.464673
26  559.183673        5.692023            559.183668           4737.893303
27  565.306122        5.586528            565.306117           4718.822637
28  571.428571        5.483414            571.428566           4699.257896
29  577.551020        5.382601            577.551015           4679.204348
30  583.673469        5.284015            583.673464           4658.667302
31  589.795918        5.187582            589.795912           4637.652110
32  595.918367        5.093234            595.918361           4616.164154
33  602.040816        5.000903            602.040810           4594.208848
34  608.163265        4.910525            608.163259           4571.791629
35  614.285714        4.822040            614.285708           4548.917952
36  620.408163        4.735387            620.408157           4525.593286
37  626.530612        4.650509            626.530606           4501.823108
38  632.653061        4.567353            632.653055           4477.612896
39  638.775510        4.485866            638.775504           4452.968125
40  644.897959        4.405996            644.897953           4427.894256
41  651.020408        4.327695            651.020402           4402.396738
42  657.142857        4.250915            657.142851           4376.480990
43  663.265306        4.175613            663.265299           4350.152404
44  669.387755        4.101743            669.387748           4323.416331
45  675.510204        4.029264            675.510197           4296.278076
46  681.632653        3.958134            681.632646           4268.742889
47  687.755102        3.888314            687.755095           4240.815958
48  693.877551        3.819767            693.877544           4212.502397
49  700.000000        3.752455            699.999993           4183.807240
</pre></div>
</div>
<img alt="../../_images/d04e62361216e3103c2633819d1a6a9608efbdba32182fb89765673cc704b8af.png" src="../../_images/d04e62361216e3103c2633819d1a6a9608efbdba32182fb89765673cc704b8af.png" />
</div>
</div>
</section>
</section>
<section id="moo-identifies-the-lowest-reactor-volume-and-offers-control-over-production">
<h2>MOO Identifies the Lowest Reactor Volume and Offers Control over Production<a class="headerlink" href="#moo-identifies-the-lowest-reactor-volume-and-offers-control-over-production" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>From the results of the two MOO methods, it can be seen that MOO identifies the lowest reactor volume (<span class="math notranslate nohighlight">\(\mathrm{\sim 9\,m^3}\)</span>) for an even higher species B concentration of <span class="math notranslate nohighlight">\(\mathrm{0.42\, kmol/m^3}\)</span>, compared to single objective optimization in <a class="reference external" href="https://github.com/zhichenglu123/optimization/blob/main/notebooks/contrib-dev/reactor_design.ipynb">Extension 1</a> where the optimum reactor volume is <span class="math notranslate nohighlight">\(\mathrm{11.4\,m^3}\)</span> and species B concentration is <span class="math notranslate nohighlight">\(\mathrm{0.36\,kmol/m^3}\)</span>.</p></li>
<li><p>MOO offer engineers the ability to select the product with highest priority, thereby enpowering stakeholders control over product yields.</p></li>
</ul>
</section>
<section id="take-away-messages">
<h2>Take Away Messages<a class="headerlink" href="#take-away-messages" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Pyomo continues to be a powerful tool in solving complex dynamic optimization problems.</p></li>
<li><p>Multi-objective optimization provides control over desired outcomes and products.</p></li>
<li><p>Multi-objective optimization identifies solutions that are robust to stakeholders decision.</p></li>
<li><p>Proper modeling of the problem is key to obtaining quality results.</p></li>
</ul>
<p>Future work ideas:</p>
<ul class="simple">
<li><p>Compare the Pareto sets generated with the two methods</p></li>
<li><p>Add another example with a non-convex Pareto set to highlight the difference between the methods</p></li>
</ul>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Link to this heading">#</a></h2>
<p>Dowling, A. W., Ruiz-Mercado, G., &amp; Zavala, V. M. (2016). A framework for multi-stakeholder decision-making and conflict resolution. Computers &amp; Chemical Engineering, 90, 136-150.</p>
<p>Hart, W. E., Laird, C. D., Watson, J. P., Woodruff, D. L., Hackebeil, G. A., Nicholson, B. L., &amp; Siirola, J. D. (2017). Pyomo-optimization modeling in python (Vol. 67, p. 277). Berlin: Springer.</p>
<p>Miettinen, K. (1999). Nonlinear multiobjective optimization (Vol. 12). Springer Science &amp; Business Media.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/contrib"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="modeling.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Modeling Paradigms</p>
      </div>
    </a>
    <a class="right-next"
       href="advanced_stochastic_programming.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Advanced Topics in Stochastic Programming</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-objectives">Learning Objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#basic-definitions">Basic Definitions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#scaling">Scaling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#pareto-optimality">Pareto Optimality</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#epsilon-constraint-method">Epsilon-Constraint Method</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#key-concepts">Key Concepts</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#key-points">Key Points</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-design-of-chemical-reactors-for-chemical-transformations">Example: Design of Chemical Reactors for Chemical Transformations</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-objective-optimization-to-maximize-species-b-and-c">Multi-Objective Optimization to Maximize Species B and C</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#optimization-model-formulation">Optimization Model Formulation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#degrees-of-freedom-analysis">Degrees of Freedom Analysis</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#weighted-method-pyomo-implementation">Weighted Method Pyomo Implementation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#epsilon-constraint-method-pyomo-implementation">Epsilon-Constraint Method Pyomo Implementation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#moo-identifies-the-lowest-reactor-volume-and-offers-control-over-production">MOO Identifies the Lowest Reactor Volume and Offers Control over Production</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#take-away-messages">Take Away Messages</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Alexander Dowling, et al.
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>